<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/opentype.js/0.7.3/opentype.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/generative-design/Code-Package-p5.js@master/libraries/gg-dep-bundle/gg-dep-bundle.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Now - Siaa Kashyap</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="page">

    <div class="sidebar">
      <div class="titles">
        <h1>siaa kashyap</h1>
        <p>portfolio 2.0</p>
      </div>
      <ul>
        <li><a href="index.html">home</a></li>
        <li><a href="projects.html">projects</a></li>
      </ul>
    </div>

    <main class="projects-main">
      <h1>now</h1>
      <p>Wave typography â€” NOW. in Chomsky.</p>
      <div id="sketch-container"></div>
    </main>

  </div>

  <script>
    let font;
    let msg = "NOW.";
    let fontSize = 200;
    let fontPath;
    let path;
    let points = [];

    let num = 17;
    let r = 8;
    let angle = 270;

    function setup() {
      let canvas = createCanvas(600, 400);
      canvas.parent('sketch-container');
      angleMode(DEGREES);
      opentype.load("fonts/Chomsky.otf", function(err, f) {
        if (err) {
          console.log(err);
        } else {
          font = f;
        }

        fontPath = font.getPath(msg, 0, 0, fontSize);
        path = new g.Path(fontPath.commands);
        path = g.resampleByLength(path, 1);

        for (let i = 0; i < path.commands.length; i++) {
          if (path.commands[i].type == "M") {
            points.push([]);
          }

          if (path.commands[i].type != "Z") {
            points[points.length - 1].push(createVector(path.commands[i].x, path.commands[i].y));
          }
        }
      });
    }

    function draw() {
      background(255, 200, 200);
      if (points.length === 0) return;

      strokeWeight(2);
      stroke(255);
      translate(1, 150);

      for (let k = num; k > 0; k--) {
        for (let i = 0; i < points.length; i++) {
          if (i == 1) {
            noFill();
          } else if (i == 3) {
            noFill();
          } else {
            fill(200, 162, 200, 200);
          }
          beginShape();
          for (let j = 0; j < points[i].length; j++) {
            vertex(points[i][j].x + r * sin(angle + k * 20), points[i][j].y + k * 10);
          }
          endShape(CLOSE);
        }
      }
      angle += 3;
    }
  </script>
</body>
</html>
